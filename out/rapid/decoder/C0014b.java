package rapid.decoder;

import android.graphics.Bitmap;
import android.os.AsyncTask;
import android.os.Build.VERSION;
import java.lang.ref.WeakReference;

class C0014b extends AsyncTask {
    private x a;
    private A b;
    private af c;
    private Object d;

    public C0014b(Object obj) {
        this.d = obj;
    }

    private boolean c() {
        boolean z = true;
        if (this.d == null) {
            return false;
        }
        if (this.d instanceof WeakReference) {
            return C0016d.b(((WeakReference) this.d).get()) != null;
        }
        if (C0016d.c(this.d) == null) {
            z = false;
        }
        return z;
    }

    private void d() {
        if (this.b != null) {
            this.b.a();
            this.b = null;
        }
    }

    protected C0015c a(Object... objArr) {
        x a = this.c != null ? this.c.a(false) : null;
        if (a == null) {
            a = this.a;
        }
        Bitmap o = a.o();
        return (o == null || isCancelled()) ? null : new C0015c(o, a.F());
    }

    public void a() {
        cancel(false);
        if (this.a != null) {
            this.a.D();
        }
        c();
        d();
    }

    public void a(A a) {
        this.b = a;
    }

    public void a(af afVar) {
        this.c = afVar;
    }

    protected void a(C0015c c0015c) {
        if (!c()) {
            d();
        } else if (this.b != null) {
            if (c0015c == null) {
                this.b.a(null, null);
            } else {
                this.b.a(c0015c.a, c0015c.b);
            }
            this.b = null;
        }
    }

    public void a(x xVar) {
        this.a = xVar;
    }

    public void b() {
        if (VERSION.SDK_INT >= 11) {
            executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, new Object[0]);
        } else {
            execute(new Object[0]);
        }
    }

    protected /* synthetic */ Object doInBackground(Object[] objArr) {
        return a(objArr);
    }

    protected void onCancelled() {
        d();
    }

    protected /* synthetic */ void onPostExecute(Object obj) {
        a((C0015c) obj);
    }
}
