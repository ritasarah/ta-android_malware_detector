package rapid.decoder.a;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;
import java.lang.ref.WeakReference;
import rapid.decoder.I;
import rapid.decoder.c.b;
import rapid.decoder.c.c;
import rapid.decoder.d.h;
import rapid.decoder.d.j;

public abstract class o implements h {
    private c a;
    private h b;
    private WeakReference c;
    private b d;
    private b e;
    private a f;

    protected o() {
    }

    private static boolean a(View view) {
        LayoutParams layoutParams = view.getLayoutParams();
        return layoutParams.width == -2 && layoutParams.height == -2;
    }

    public Drawable a(Context context, Bitmap bitmap) {
        return bitmap == null ? null : this.f != null ? this.f.a(context, bitmap) : new BitmapDrawable(context.getResources(), bitmap);
    }

    public o a(ScaleType scaleType) {
        return a(new j(scaleType));
    }

    public o a(b bVar) {
        this.d = bVar;
        return this;
    }

    public o a(c cVar) {
        this.a = cVar;
        return this;
    }

    public o a(h hVar) {
        this.b = hVar;
        return this;
    }

    public void a(Bitmap bitmap, boolean z) {
        View j = j();
        if (j != null) {
            Drawable a = a(j.getContext(), bitmap);
            if (a != null) {
                m().a(j.getContext(), this, a, z);
                return;
            }
        }
        c();
    }

    protected void a(Drawable drawable) {
    }

    public void a(a aVar) {
        this.f = aVar;
    }

    public void a(t tVar) {
        View j = j();
        if (j != null) {
            if ((j.getWidth() == 0 || j.getHeight() == 0) && j.isLayoutRequested() && !a(j)) {
                I.a(j, new s(this, tVar));
            } else {
                tVar.a(j, false);
            }
        }
    }

    public o b(b bVar) {
        this.e = bVar;
        return this;
    }

    public void b() {
        c();
    }

    protected void b(Drawable drawable) {
    }

    protected void b(View view) {
        this.c = new WeakReference(view);
    }

    public o c(int i) {
        this.d = new q(this, i);
        return this;
    }

    public o c(Drawable drawable) {
        this.d = new p(this, drawable);
        return this;
    }

    public void c() {
    }

    public o d(int i) {
        this.e = new r(this, i);
        return this;
    }

    public h d() {
        return this.b;
    }

    public int e() {
        View j = j();
        return j == null ? 0 : j.getLayoutParams().width;
    }

    public int f() {
        View j = j();
        return j == null ? 0 : j.getLayoutParams().height;
    }

    public int g() {
        View j = j();
        return j == null ? 0 : j.getWidth();
    }

    public int h() {
        View j = j();
        return j == null ? 0 : j.getHeight();
    }

    protected void i() {
        this.a = null;
        this.b = null;
        this.c = null;
        this.d = null;
        this.e = null;
        this.f = null;
    }

    public View j() {
        return (View) this.c.get();
    }

    public void k() {
        if (this.d != null) {
            View j = j();
            if (j != null) {
                Drawable a = this.d.a(j.getContext());
                if (a != null) {
                    a(a);
                    int a2 = a();
                    for (int i = 0; i < a2; i++) {
                        if (a(i)) {
                            a(i, a);
                        }
                    }
                }
            }
        }
    }

    public void l() {
        if (this.e != null) {
            View j = j();
            if (j != null) {
                Drawable a = this.e.a(j.getContext());
                if (a != null) {
                    b(a);
                    Context context = j.getContext();
                    int a2 = a();
                    for (int i = 0; i < a2; i++) {
                        if (a(i)) {
                            m().a(context, this, a, true);
                        }
                    }
                }
            }
        }
    }

    public c m() {
        return this.a == null ? c.c : this.a;
    }

    public int n() {
        View j = j();
        return j == null ? 0 : c.a(j);
    }

    public int o() {
        View j = j();
        return j == null ? 0 : c.b(j);
    }

    public int p() {
        View j = j();
        return j == null ? 0 : j instanceof ImageView ? b.a((ImageView) j) : ActivityChooserViewAdapter.MAX_ACTIVITY_COUNT_UNLIMITED;
    }

    public int q() {
        View j = j();
        return j == null ? 0 : j instanceof ImageView ? b.b((ImageView) j) : ActivityChooserViewAdapter.MAX_ACTIVITY_COUNT_UNLIMITED;
    }
}
