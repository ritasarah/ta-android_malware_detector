package com.albus.behavior;

import android.content.Context;
import android.support.design.widget.AppBarLayout;
import android.support.design.widget.AppBarLayout.OnOffsetChangedListener;
import android.support.design.widget.CoordinatorLayout;
import android.support.design.widget.CoordinatorLayout.Behavior;
import android.util.AttributeSet;
import android.view.View;
import com.catfiz.R;
import com.catfiz.util.Log;

public class ToolbarShadowBehavior extends Behavior {
    protected static final String TAG = "ToolbarShadowBehavior";
    private Context mContext;
    private boolean mFirstCreateBehavior = false;
    private int mToolbarHeight;

    public ToolbarShadowBehavior(Context context, AttributeSet attributeSet) {
        this.mToolbarHeight = (int) context.getResources().getDimension(R.dimen.actionbar);
        this.mContext = context;
    }

    public boolean layoutDependsOn(CoordinatorLayout coordinatorLayout, View view, View view2) {
        return view2 instanceof AppBarLayout;
    }

    public boolean onDependentViewChanged(CoordinatorLayout coordinatorLayout, final View view, View view2) {
        boolean onDependentViewChanged = super.onDependentViewChanged(coordinatorLayout, view, view2);
        if (!(view2 instanceof AppBarLayout)) {
            return onDependentViewChanged;
        }
        ((AppBarLayout) view2).addOnOffsetChangedListener(new OnOffsetChangedListener() {
            public void onOffsetChanged(AppBarLayout appBarLayout, int i) {
                Log.d(ToolbarShadowBehavior.TAG, "offset:" + i + " height:" + appBarLayout.getHeight());
                if (i == 0) {
                    view.setVisibility(4);
                } else {
                    view.setVisibility(0);
                }
            }
        });
        return true;
    }
}
