package com.albus.adapter;

import android.app.Activity;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.RelativeLayout;
import com.albus.activity.SharedViewerActivity;
import com.albus.media.ScaleImageView;
import com.catfiz.R;
import com.catfiz.util.Log;

public class SharedViewerAdapter extends PagerAdapter {
    private static final String TAG = "SharedViewerAdapter";
    private LayoutInflater inflater;
    private Activity mActivity;
    private int[] mImageResID;

    public SharedViewerAdapter(Activity activity, int[] iArr) {
        this.mActivity = activity;
        this.mImageResID = iArr;
        Log.d(TAG, "res length = " + iArr.length);
    }

    public void destroyItem(ViewGroup viewGroup, int i, Object obj) {
        ((ViewPager) viewGroup).removeView((RelativeLayout) obj);
    }

    public int getCount() {
        return this.mImageResID.length;
    }

    public Object instantiateItem(ViewGroup viewGroup, int i) {
        Log.d(TAG, "instantiate item, position=" + i + " value=" + this.mImageResID[i]);
        this.inflater = (LayoutInflater) this.mActivity.getSystemService("layout_inflater");
        View inflate = this.inflater.inflate(R.layout.image_viewer, viewGroup, false);
        ScaleImageView scaleImageView = (ScaleImageView) inflate.findViewById(R.id.imgDisplay);
        scaleImageView.setImageResource(this.mImageResID[i]);
        scaleImageView.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                Log.d(SharedViewerAdapter.TAG, "image clicked");
                ((SharedViewerActivity) SharedViewerAdapter.this.mActivity).showHideActionbar();
            }
        });
        ((ViewPager) viewGroup).addView(inflate);
        return inflate;
    }

    public boolean isViewFromObject(View view, Object obj) {
        return view == ((RelativeLayout) obj);
    }
}
