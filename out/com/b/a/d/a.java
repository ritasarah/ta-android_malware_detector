package com.b.a.d;

import com.b.a.c;
import com.b.a.c.b;
import com.b.a.c.e;
import com.b.a.c.g;
import com.b.a.d.a.f;
import com.b.a.n;
import com.b.a.q;
import com.b.a.s;
import com.b.a.t;
import com.b.a.u;
import java.util.List;
import java.util.Map;

public final class a implements q {
    private static final u[] a = new u[0];
    private final f b = new f();

    private static int a(int[] iArr, b bVar) {
        int e = bVar.e();
        int i = iArr[0];
        int i2 = iArr[1];
        while (i < e && bVar.a(i, i2)) {
            i++;
        }
        if (i == e) {
            throw n.a();
        }
        i -= iArr[0];
        if (i != 0) {
            return i;
        }
        throw n.a();
    }

    private static b a(b bVar) {
        int[] c = bVar.c();
        int[] d = bVar.d();
        if (c == null || d == null) {
            throw n.a();
        }
        int a = a(c, bVar);
        int i = c[1];
        int i2 = d[1];
        int i3 = c[0];
        int i4 = ((d[0] - i3) + 1) / a;
        i2 = ((i2 - i) + 1) / a;
        if (i4 <= 0 || i2 <= 0) {
            throw n.a();
        }
        int i5 = a >> 1;
        i += i5;
        int i6 = i3 + i5;
        b bVar2 = new b(i4, i2);
        for (i5 = 0; i5 < i2; i5++) {
            int i7 = i + (i5 * a);
            for (i3 = 0; i3 < i4; i3++) {
                if (bVar.a((i3 * a) + i6, i7)) {
                    bVar2.b(i3, i5);
                }
            }
        }
        return bVar2;
    }

    public s decode(c cVar) {
        return decode(cVar, null);
    }

    public s decode(c cVar, Map map) {
        e a;
        u[] e;
        if (map == null || !map.containsKey(com.b.a.e.PURE_BARCODE)) {
            g a2 = new com.b.a.d.b.a(cVar.c()).a();
            a = this.b.a(a2.d());
            e = a2.e();
        } else {
            a = this.b.a(a(cVar.c()));
            e = a;
        }
        s sVar = new s(a.b(), a.a(), e, com.b.a.a.DATA_MATRIX);
        List c = a.c();
        if (c != null) {
            sVar.a(t.BYTE_SEGMENTS, c);
        }
        String d = a.d();
        if (d != null) {
            sVar.a(t.ERROR_CORRECTION_LEVEL, d);
        }
        return sVar;
    }

    public void reset() {
    }
}
