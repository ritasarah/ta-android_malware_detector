package com.catfiz.svcpersistent;

public class P2PDownloadInfo {
    private static final int MAX_POOL_SIZE = 50;
    private static P2PDownloadInfo sPool;
    private static int sPoolSize = 0;
    private static final Object sPoolSync = new Object();
    public String mChannelID;
    public int mDataSize;
    public String mFilePath;
    public String mKey;
    public String mSenderpin;
    public int mStreamType;
    public long mTimeStamp;
    P2PDownloadInfo next;

    public static P2PDownloadInfo obtain() {
        synchronized (sPoolSync) {
            if (sPool != null) {
                P2PDownloadInfo p2PDownloadInfo = sPool;
                sPool = p2PDownloadInfo.next;
                p2PDownloadInfo.next = null;
                sPoolSize--;
                return p2PDownloadInfo;
            }
            return new P2PDownloadInfo();
        }
    }

    void clearForRecycle() {
        this.mTimeStamp = 0;
        this.mFilePath = null;
        this.mChannelID = null;
        this.mStreamType = 0;
        this.mKey = null;
        this.mDataSize = 0;
        this.mSenderpin = null;
    }

    public void recycle() {
        clearForRecycle();
        synchronized (sPoolSync) {
            if (sPoolSize < MAX_POOL_SIZE) {
                this.next = sPool;
                sPool = this;
                sPoolSize++;
            }
        }
    }
}
