package com.catfiz.svcpersistent;

public class DataStorageUploadInfo {
    private static final int MAX_POOL_SIZE = 50;
    private static DataStorageUploadInfo sPool;
    private static int sPoolSize = 0;
    private static final Object sPoolSync = new Object();
    public String mAdditionalData;
    public int mBytestart;
    public int mDataSize;
    public String mFilePath;
    public String mKey;
    public int mStreamType;
    public long mTimeStamp;
    DataStorageUploadInfo next;

    public static DataStorageUploadInfo obtain() {
        synchronized (sPoolSync) {
            if (sPool != null) {
                DataStorageUploadInfo dataStorageUploadInfo = sPool;
                sPool = dataStorageUploadInfo.next;
                dataStorageUploadInfo.next = null;
                sPoolSize--;
                return dataStorageUploadInfo;
            }
            return new DataStorageUploadInfo();
        }
    }

    void clearForRecycle() {
        this.mTimeStamp = 0;
        this.mFilePath = null;
        this.mStreamType = 0;
        this.mKey = null;
        this.mDataSize = 0;
        this.mAdditionalData = null;
    }

    public void recycle() {
        clearForRecycle();
        synchronized (sPoolSync) {
            if (sPoolSize < MAX_POOL_SIZE) {
                this.next = sPool;
                sPool = this;
                sPoolSize++;
            }
        }
    }
}
