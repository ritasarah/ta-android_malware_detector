package com.catfiz.svcpersistent;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;

public class ServiceStatePersistent {
    private static final String TAG = "ServiceStatePersistent";
    private SQLiteDatabase mDB = null;
    private TaskDataStorage mTaskDataStorage = null;

    public ServiceStatePersistent(Context context) {
        this.mTaskDataStorage = new TaskDataStorage(context);
    }

    public void close() {
        if (this.mDB != null) {
            this.mDB.close();
        }
        this.mDB = null;
    }

    public P2PUploadInfo[] getAllP2PUploadState() {
        return this.mTaskDataStorage.getAllP2PUploadInfo();
    }

    public P2PUploadInfo obtainP2PUploadInfo() {
        return P2PUploadInfo.obtain();
    }

    public void open() {
        if (this.mDB == null) {
            this.mDB = this.mTaskDataStorage.getDB();
        }
    }

    public boolean putP2PUploadState(P2PUploadInfo p2PUploadInfo) {
        return this.mTaskDataStorage.storeP2PUploadInfo(p2PUploadInfo);
    }
}
