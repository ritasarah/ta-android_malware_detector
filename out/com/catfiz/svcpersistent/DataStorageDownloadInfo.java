package com.catfiz.svcpersistent;

public class DataStorageDownloadInfo {
    private static final int MAX_POOL_SIZE = 50;
    private static DataStorageDownloadInfo sPool;
    private static int sPoolSize = 0;
    private static final Object sPoolSync = new Object();
    public String mAdditionalData;
    public int mDataSize;
    public String mFilePath;
    public String mKey;
    public int mStreamType;
    public long mTimeStamp;
    DataStorageDownloadInfo next;

    public enum DataStorageStreamType {
        FIZZLINK_DATA,
        POOL_DATA,
        CHAT_DATA
    }

    public static DataStorageDownloadInfo obtain() {
        synchronized (sPoolSync) {
            if (sPool != null) {
                DataStorageDownloadInfo dataStorageDownloadInfo = sPool;
                sPool = dataStorageDownloadInfo.next;
                dataStorageDownloadInfo.next = null;
                sPoolSize--;
                return dataStorageDownloadInfo;
            }
            return new DataStorageDownloadInfo();
        }
    }

    void clearForRecycle() {
        this.mTimeStamp = 0;
        this.mFilePath = null;
        this.mStreamType = 0;
        this.mKey = null;
        this.mDataSize = 0;
        this.mAdditionalData = null;
    }

    public void recycle() {
        clearForRecycle();
        synchronized (sPoolSync) {
            if (sPoolSize < MAX_POOL_SIZE) {
                this.next = sPool;
                sPool = this;
                sPoolSize++;
            }
        }
    }
}
