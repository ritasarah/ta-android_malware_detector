package com.catfiz.app;

import android.support.v4.app.ListFragment;
import android.support.v4.view.ViewPager;
import android.view.ViewGroup;
import android.widget.ListAdapter;
import com.catfiz.adapter.CatfizBaseAdapter;
import com.catfiz.adapter.IAnchorableAdapter;
import com.catfiz.util.Log;

public class CatfizListFragment extends ListFragment {
    private static final String TAG = "CatfizListFragment";
    private CatfizBaseAdapter mCatfizAdapter = null;
    private IAnchorableAdapter mContainerAdapter = null;

    public void onPause() {
        super.onPause();
        Log.d(TAG, "--- ON PAUSE ---");
        if (this.mCatfizAdapter != null) {
            this.mCatfizAdapter.setAdapterVisibility(false);
            this.mCatfizAdapter.notifyDataSetChangedOnPause();
        }
    }

    public void onResume() {
        Log.d(TAG, "--- ON RESUME ---");
        if (this.mCatfizAdapter != null) {
            this.mCatfizAdapter.setAdapterVisibility(true);
        }
        super.onResume();
    }

    public void onStart() {
        Log.d(TAG, "--- ON START ---");
        if (this.mCatfizAdapter != null) {
            this.mCatfizAdapter.setAdapterVisibility(true);
        }
        super.onStart();
    }

    public void onStop() {
        super.onStop();
        Log.d(TAG, "--- ON STOP ---");
        if (this.mCatfizAdapter != null) {
            this.mCatfizAdapter.setAdapterVisibility(false);
        }
    }

    protected void putAnchorAtCurrentPage() {
        if (this.mContainerAdapter != null) {
            Log.d(TAG, "--- putAnchorAtCurrentPage ---");
            this.mContainerAdapter.putAnchorAtCurrentPage();
        }
    }

    protected void releaseAnchorAtCurrentPage() {
        if (this.mContainerAdapter != null) {
            Log.d(TAG, "--- releaseAnchorAtCurrentPage ---");
            this.mContainerAdapter.releaseAnchorAtCurrentPage();
        }
    }

    protected void setContainerView(ViewGroup viewGroup) {
        if ((viewGroup instanceof ViewPager) && (((ViewPager) viewGroup).getAdapter() instanceof IAnchorableAdapter)) {
            this.mContainerAdapter = (IAnchorableAdapter) ((ViewPager) viewGroup).getAdapter();
        }
    }

    public void setListAdapter(ListAdapter listAdapter) {
        super.setListAdapter(listAdapter);
        if (listAdapter instanceof CatfizBaseAdapter) {
            this.mCatfizAdapter = (CatfizBaseAdapter) listAdapter;
        }
    }
}
