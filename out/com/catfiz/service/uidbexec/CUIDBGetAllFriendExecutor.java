package com.catfiz.service.uidbexec;

import android.database.Cursor;
import com.catfiz.service.CatfishService;
import com.catfiz.service.CatfishUIBinder.DatabaseRequestOP;
import com.catfiz.service.FriendListDataStorage;
import com.catfiz.service.ICatfishClientInterface;
import com.catfiz.service.uiresponse.CUIDatabaseResponse;

public class CUIDBGetAllFriendExecutor extends CUIDatabaseExecutorBase {
    private static final String TAG = "CUIDBGetAllFriendExecutor";
    private boolean mWithLimits = false;

    public CUIDBGetAllFriendExecutor(ICatfishClientInterface iCatfishClientInterface) {
        super(iCatfishClientInterface);
    }

    public CUIDBGetAllFriendExecutor(ICatfishClientInterface iCatfishClientInterface, boolean z) {
        super(iCatfishClientInterface);
        this.mWithLimits = z;
    }

    public void run() {
        if (this.mIfclient != null && !this.mIfclient.isFinish()) {
            FriendListDataStorage friendListDataStorage = new FriendListDataStorage(getCatfishService());
            Cursor allFriendsForFriendlist = this.mWithLimits ? friendListDataStorage.getAllFriendsForFriendlist() : friendListDataStorage.getAllFriends();
            Object transfromDBCursor = this.mIfclient.transfromDBCursor(DatabaseRequestOP.GET_ALL_FRIENDLIST, allFriendsForFriendlist, 0);
            if (allFriendsForFriendlist != null) {
                allFriendsForFriendlist.close();
            }
            ICatfishClientInterface iCatfishClientInterface = this.mIfclient;
            getCatfishService();
            postResponse(new CUIDatabaseResponse(iCatfishClientInterface, CatfishService.GET_ALL_FRIENDLIST_KEY, transfromDBCursor));
        }
    }
}
