package com.catfiz.service.uidbexec;

import android.database.Cursor;
import com.catfiz.service.CatfishDataStorage;
import com.catfiz.service.CatfishMessageObject;
import com.catfiz.service.CatfishService;
import com.catfiz.service.CatfishUIBinder.DatabaseRequestOP;
import com.catfiz.service.FriendListDataStorage;
import com.catfiz.service.ICatfishClientInterface;
import com.catfiz.service.uiresponse.CUIDatabaseResponse;

public class CUIDBBlacklistNic extends CUIDatabaseExecutorBase {
    private static final String TAG = "CUIDBBlacklistNic";

    public CUIDBBlacklistNic(ICatfishClientInterface iCatfishClientInterface, CatfishMessageObject catfishMessageObject) {
        super(null, iCatfishClientInterface, catfishMessageObject, DatabaseRequestOP.UNKNOWN);
    }

    public void run() {
        CatfishDataStorage catfishDataStorage = new CatfishDataStorage(getCatfishService());
        FriendListDataStorage friendListDataStorage = new FriendListDataStorage(getCatfishService());
        if (!catfishDataStorage.storeBlockedNic(this.mMessage)) {
            return;
        }
        if (this.mMessage.username != null) {
            Cursor allFriendRequest = friendListDataStorage.getAllFriendRequest();
            ICatfishClientInterface iCatfishClientInterface = this.mIfclient;
            getCatfishService();
            postResponse(new CUIDatabaseResponse(iCatfishClientInterface, CatfishService.GET_ALL_FRIENDREQ_KEY, allFriendRequest));
            return;
        }
        allFriendRequest = catfishDataStorage.getBlockedNicList();
        iCatfishClientInterface = this.mIfclient;
        getCatfishService();
        postResponse(new CUIDatabaseResponse(iCatfishClientInterface, CatfishService.GET_BLACKLISTNIC_KEY, allFriendRequest));
    }
}
