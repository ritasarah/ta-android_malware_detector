package com.catfiz.service.uidbexec;

import android.database.Cursor;
import com.catfiz.service.CatfishDataStorage;
import com.catfiz.service.CatfishMessageObject;
import com.catfiz.service.CatfishService;
import com.catfiz.service.CatfishUIBinder.DatabaseRequestOP;
import com.catfiz.service.ICatfishClientInterface;
import com.catfiz.service.uiresponse.CUIDatabaseResponse;

public class CUIDBGetUserLikeListExecutor extends CUIDatabaseExecutorBase {
    private static final String TAG = "CUIDBGetUserLikeListExecutor";

    public CUIDBGetUserLikeListExecutor(ICatfishClientInterface iCatfishClientInterface, CatfishMessageObject catfishMessageObject) {
        super(null, iCatfishClientInterface, catfishMessageObject, DatabaseRequestOP.GET_USER_LIKE_LIST);
    }

    public void run() {
        Cursor responseLikeList = new CatfishDataStorage(getCatfishService()).getResponseLikeList(this.mMessage.conversation_key);
        if (!(this.mIfclient == null || this.mIfclient.isFinish())) {
            Object transfromDBCursor = this.mIfclient.transfromDBCursor(this.mOperation, responseLikeList, 0);
            ICatfishClientInterface iCatfishClientInterface = this.mIfclient;
            getCatfishService();
            postResponse(new CUIDatabaseResponse(iCatfishClientInterface, CatfishService.GET_USER_LIKE_LIST_CONVKEY, transfromDBCursor));
        }
        if (responseLikeList != null) {
            responseLikeList.close();
        }
    }
}
