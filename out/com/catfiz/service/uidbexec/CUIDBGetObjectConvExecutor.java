package com.catfiz.service.uidbexec;

import android.database.Cursor;
import com.catfiz.service.CatfishDataStorage;
import com.catfiz.service.CatfishMessageObject;
import com.catfiz.service.CatfishService;
import com.catfiz.service.CatfishUIBinder.DatabaseRequestOP;
import com.catfiz.service.ICatfishClientInterface;
import com.catfiz.service.uiresponse.CUIDatabaseResponse;
import com.catfiz.util.Log;

public class CUIDBGetObjectConvExecutor extends CUIDatabaseExecutorBase {
    private static final String TAG = "CUIDBGetObjectConvExecutor";

    public CUIDBGetObjectConvExecutor(ICatfishClientInterface iCatfishClientInterface, CatfishMessageObject catfishMessageObject) {
        super(null, iCatfishClientInterface, catfishMessageObject, DatabaseRequestOP.UNKNOWN);
    }

    public void run() {
        CatfishDataStorage catfishDataStorage = new CatfishDataStorage(getCatfishService());
        Log.d(TAG, "----GET OBJ CONVERSATION: " + this.mMessage.conversation_key + "---");
        Cursor objectConversation = catfishDataStorage.getObjectConversation(this.mMessage);
        ICatfishClientInterface iCatfishClientInterface = this.mIfclient;
        getCatfishService();
        postResponse(new CUIDatabaseResponse(iCatfishClientInterface, CatfishService.GET_OBJCOMM_CONVERSATION_KEY, objectConversation));
        Log.d(TAG, "----GET OBJ CONVERSATION: Post Cursor to Client---");
    }
}
