import libsvm.svm_model;
import libsvm.svm_problem;
import weka.core.Instances;

import java.util.Scanner;

/**
 * Created by Rita on 3/10/2016.
 */


public class MainArgs {


    public static void main(String[] args) {

//        for(int i = 0 ;i<args.length; i++){
//            System.out.println(args[i]);
//        }

        JadxUtil jUtil = new JadxUtil();
        ClassificationUtil cUtil = new ClassificationUtil();
        ClassificationUtil cUtil2 = new ClassificationUtil();

        svm_problem prob;
        svm_model model = null;

        if (args[0].equalsIgnoreCase("-create")){
//            args[1] = folder_location/ args[2] = arff result.arff
            jUtil.getAllApk(args[1],args[2]);
        }else if(args[0].equalsIgnoreCase("-model" )){
            //args[1] = arff training.arff  args[2] = modelname.model
            Instances trainInstances = cUtil.loadARFF(args[1], 0);

            cUtil.setParam();
            prob = cUtil.defineProblem(trainInstances);
            model = cUtil.trainClassifier(prob);

            cUtil.saveClassifier(model,args[2]);

            //crossvalidation
            cUtil.crossValidation(prob,10,3);
        }else if(args[0].equalsIgnoreCase("-eval")){
            //args[1] = model_name.model args[2] = arff_eval,arff

            model = cUtil.loadModel(args[1]);

            Instances testInstances2 = cUtil.loadARFF(args[2],0);
            cUtil2.classifyInstancesEval(model,testInstances2);

        }else if (args[0].equalsIgnoreCase("-attrselect")){
            //args[1]={infogain/symmetrical/gainratio/correlation} args[2]= arff_path.arff
             cUtil.AttrRanker(cUtil.loadARFF(args[2],0),args[1]);

        }else if(args[0].equalsIgnoreCase("-help")){
            System.out.println("List of available options : ");
            System.out.println("'-create' <folder_location/> <arff_result.arff>                                 Create Dataset ");
            System.out.println("'-model' <arff_path.arff> <model_name.model>                                    Generate Model and Cross Validation");
            System.out.println("'-eval' <model_name.model> <arff_evaluation.arff>                               Evaluate Model");
            System.out.println("'-attrselect' {infogain/symmetrical/gainratio/correlation} <arff_path.arff>     Attribute Selection");
            System.out.println("'-help'                                                                         Menu");
        }

    }
}
