import jadx.api.JadxDecompiler;
import jadx.core.utils.exceptions.JadxException;
import org.jd.gui.api.API;
import org.jf.dexlib2.DexFileFactory;
import org.jf.dexlib2.iface.ClassDef;
import org.jf.dexlib2.iface.DexFile;

import java.io.File;

/**
 * Created by Rita on 3/10/2016.
 */


public class Main {

   public static void apkToolExtraction(String appname){

       String[] s = new String[6];
       s[0]="d";
//       s[1]="-r";
       s[1]="-s";
       s[2]="-f";
       s[3]="--output";
       s[4]="output_folder"; // nama output folder
       s[5]=appname;

       try {
           brut.apktool.Main.main(s);
           System.out.println("apktool");
       } catch (Exception e) {
           e.printStackTrace();
       }
   }

    public static void luytenDexExtraction(){

        String[] s = new String[6];
//        s[0] = ;

        try{
            us.deathmarine.luyten.Luyten.main(s);
        } catch (Exception e){
            e.printStackTrace();
        }

    }


    public static void main(String[] args) {

        //apktool
//      String appname = "com.catfiz.apk";

//      apkToolExtraction(appname);

        Manifest manifest = new Manifest();

        manifest.getPermission();

        manifest.printPermission();

        manifest.getAPILevel();

        manifest.printAPILevel();

        try {
            JadxDecompiler jadx = new JadxDecompiler();

            jadx.loadFile(new File("output_folder/classes.dex"));
            jadx.setOutputDir(new File("out"));
            jadx.save();
        } catch (JadxException e) {
            e.printStackTrace();
        }

        //class lists
        try{
            File dex = new File("output_folder/classes.dex");
            DexFile dexFile = DexFileFactory.loadDexFile(dex,19,true);

            for (ClassDef classDef: dexFile.getClasses()) {
                String classType = classDef.getType().replace("L","");
            }
        } catch (Exception e){

        }

    }
}
